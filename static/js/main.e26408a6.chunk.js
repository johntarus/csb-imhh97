(this["webpackJsonpredux-essentials-example"]=this["webpackJsonpredux-essentials-example"]||[]).push([[0],{1336:function(e,t){},1354:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(23),s=n(3),c=n.n(s),o=n(66),i=n.n(o),u=(n(159),n(145)),d=n(15),p=n(13),l=function(){return Object(p.jsx)("nav",{children:Object(p.jsxs)("section",{children:[Object(p.jsx)("h1",{children:"Redux Essentials Example"}),Object(p.jsx)("div",{className:"navContent",children:Object(p.jsx)("div",{className:"navLinks"})})]})})},j=n(73),m=function(){var e=Object(j.b)((function(e){return e.posts})).map((function(e){return Object(p.jsxs)("article",{className:"post-excerpt",children:[Object(p.jsx)("h3",{children:e.title}),Object(p.jsx)("p",{className:"post-content",children:e.content.substring(0,100)})]},e.id)}));return Object(p.jsxs)("section",{className:"posts-list",children:[Object(p.jsx)("h1",{children:"Posts"}),e]})};var f,b=function(){return Object(p.jsxs)(u.a,{children:[Object(p.jsx)(l,{}),Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(c.a.Fragment,{children:Object(p.jsx)(m,{})})}}),Object(p.jsx)(d.a,{to:"/"})]})})]})},O=n(31),h=Object(O.b)({name:"posts",initialState:[{id:"1",title:"First Post!",content:"Hello!"},{id:"2",title:"Second Post",content:"More text"}],reducers:{}}).reducer,y=Object(O.a)({reducer:{posts:h}}),g=n(5),v=n(18),x=n(147),S=n(4),w=n(30),N=n(153),I=n(27),k=n(32),A=n.n(k),q=n(97),M=n.n(q),F=n(148),D=n(149),J=n(105),K=["id"],E=2e3,P=M()(),R=localStorage.getItem("randomTimestampSeed");function T(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(P()*(t-e+1))+e}R?f=new Date(R):(R=(f=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",R)),P=M()(R),Object(D.setRandom)(P),A.a.seed(f.getTime());for(var U,B=function(e){return e[T(0,e.length-1)]},C=Object(I.factory)({user:{id:Object(I.primaryKey)(O.c),firstName:String,lastName:String,name:String,username:String,posts:Object(I.manyOf)("post")},post:{id:Object(I.primaryKey)(O.c),title:String,date:String,content:String,reactions:Object(I.oneOf)("reaction"),comments:Object(I.manyOf)("comment"),user:Object(I.oneOf)("user")},comment:{id:Object(I.primaryKey)(String),date:String,text:String,post:Object(I.oneOf)("post")},reaction:{id:Object(I.primaryKey)(O.c),thumbsUp:Number,hooray:Number,heart:Number,rocket:Number,eyes:Number,post:Object(I.oneOf)("post")}}),H=function(){var e=A.a.name.firstName(),t=A.a.name.lastName();return{firstName:e,lastName:t,name:"".concat(e," ").concat(t),username:A.a.internet.userName()}},L=0;L<3;L++)for(var z=C.user.create(H()),G=0;G<3;G++){var Q=(U=z,{title:A.a.lorem.words(),date:A.a.date.recent(7).toISOString(),user:U,content:A.a.lorem.paragraphs(),reactions:C.reaction.create()});C.post.create(Q)}var V=function(e){return Object(S.a)(Object(S.a)({},e),{},{user:e.user.id})},W=[w.c.get("/fakeApi/posts",(function(e,t,n){var r=C.post.getAll().map(V);return t(n.delay(E),n.json(r))})),w.c.post("/fakeApi/posts",(function(e,t,n){var r=e.body;if("error"===r.content)return t(n.delay(E),n.status(500),n.json("Server error saving this post!"));r.date=(new Date).toISOString();var a=C.user.findFirst({where:{id:{equals:r.user}}});r.user=a,r.reactions=C.reaction.create();var s=C.post.create(r);return t(n.delay(E),n.json(V(s)))})),w.c.get("/fakeApi/posts/:postId",(function(e,t,n){var r=C.post.findFirst({where:{id:{equals:e.params.postId}}});return t(n.delay(E),n.json(V(r)))})),w.c.patch("/fakeApi/posts/:postId",(function(e,t,n){var r=e.body,a=(r.id,Object(x.a)(r,K)),s=C.post.update({where:{id:{equals:e.params.postId}},data:a});return t(n.delay(E),n.json(V(s)))})),w.c.get("/fakeApi/posts/:postId/comments",(function(e,t,n){var r=C.post.findFirst({where:{id:{equals:e.params.postId}}});return t(n.delay(E),n.json({comments:r.comments}))})),w.c.post("/fakeApi/posts/:postId/reactions",(function(e,t,n){var r=e.params.postId,a=e.body.reaction,s=C.post.findFirst({where:{id:{equals:r}}}),c=C.post.update({where:{id:{equals:r}},data:{reactions:Object(S.a)(Object(S.a)({},s.reactions),{},Object(v.a)({},a,s.reactions[a]+=1))}});return t(n.delay(E),n.json(V(c)))})),w.c.get("/fakeApi/notifications",(function(e,t,n){var r=_(void 0,T(1,5),C);return t(n.delay(E),n.json(r))})),w.c.get("/fakeApi/users",(function(e,t,n){return t(n.delay(E),n.json(C.user.getAll()))}))],X=N.a.apply(void 0,W),Y=new F.Server("ws://localhost"),Z=function(e,t){!function(e,t){e.send(JSON.stringify(t))}(e,{type:"notifications",payload:_(t,T(1,5),C)})};Y.on("connection",(function(e){e,e.on("message",(function(t){var n=JSON.parse(t);if("notifications"===n.type){var r=n.payload;Z(e,r)}}))}));var $=["poked you","says hi!","is glad we're friends","sent you a gift"];function _(e,t,n){var r,a=new Date;e?r=Object(J.a)(e):(r=new Date(a.valueOf())).setMinutes(r.getMinutes()-15);var s=Object(g.a)(Array(t)).map((function(){var e=B(n.user.getAll()),t=B($);return{id:Object(O.c)(),date:A.a.date.between(r,a).toISOString(),message:t,user:e.id}}));return s}function ee(){return(ee=Object(a.a)(Object(r.a)().mark((function e(){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.start({onUnhandledRequest:"bypass"});case 2:i.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(j.a,{store:y,children:Object(p.jsx)(b,{})})}),document.getElementById("root"));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){ee.apply(this,arguments)}()},159:function(e,t,n){}},[[1354,1,2]]]);
//# sourceMappingURL=main.e26408a6.chunk.js.map